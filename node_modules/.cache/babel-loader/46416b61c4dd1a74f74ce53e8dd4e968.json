{"ast":null,"code":"import _regeneratorRuntime from \"/Users/gautamverma/Desktop/portfolio_gautam_github/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Users/gautamverma/Desktop/portfolio_gautam_github/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectWithoutProperties from \"/Users/gautamverma/Desktop/portfolio_gautam_github/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _asyncToGenerator from \"/Users/gautamverma/Desktop/portfolio_gautam_github/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _excluded = [\"username\", \"year\", \"transformData\"];\nimport React, { useState, useCallback, useEffect } from 'react';\nimport Calendar, { Skeleton } from 'react-activity-calendar';\nexport { createCalendarTheme } from 'react-activity-calendar';\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\n// GitHub theme\nvar API_URL = 'https://github-contributions-api.jogruber.de/v4/';\nvar DEFAULT_THEME = {\n  level4: '#216e39',\n  level3: '#30a14e',\n  level2: '#40c463',\n  level1: '#9be9a8',\n  level0: '#ebedf0'\n};\nfunction fetchCalendarData(_x, _x2) {\n  return _fetchCalendarData.apply(this, arguments);\n}\nfunction _fetchCalendarData() {\n  _fetchCalendarData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(username, year) {\n    var response, data;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return fetch(\"\".concat(API_URL).concat(username, \"?y=\").concat(year));\n        case 2:\n          response = _context.sent;\n          _context.next = 5;\n          return response.json();\n        case 5:\n          data = _context.sent;\n          if (response.ok) {\n            _context.next = 8;\n            break;\n          }\n          throw new Error(data.error);\n        case 8:\n          return _context.abrupt(\"return\", data);\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _fetchCalendarData.apply(this, arguments);\n}\nvar GitHubCalendar = function GitHubCalendar(_ref) {\n  var username = _ref.username,\n    _ref$year = _ref.year,\n    year = _ref$year === void 0 ? 'last' : _ref$year,\n    transformDataProp = _ref.transformData,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var _props$theme;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var transformDataCallback = useCallback(function (contributions) {\n    return transformData(contributions, transformDataProp);\n  }, [transformDataProp]);\n  var fetchData = useCallback(function () {\n    setLoading(true);\n    setError(null);\n    fetchCalendarData(username, year).then(function (_ref2) {\n      var contributions = _ref2.contributions;\n      return setData(transformDataCallback(contributions));\n    }).catch(setError).finally(function () {\n      return setLoading(false);\n    });\n  }, [username, year, transformDataCallback]);\n  useEffect(fetchData, [fetchData]);\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"i\", null, \"Unable to fetch contribution data. See console.\"));\n  }\n  if (loading || !data) {\n    return /*#__PURE__*/React.createElement(Skeleton, {\n      loading: true\n    });\n  }\n  var theme = props.color ? undefined : (_props$theme = props.theme) !== null && _props$theme !== void 0 ? _props$theme : DEFAULT_THEME;\n  var labels = {\n    totalCount: \"{{count}} contributions in \".concat(year === 'last' ? 'the last year' : '{{year}}')\n  };\n  return /*#__PURE__*/React.createElement(Calendar, _extends({\n    data: data,\n    theme: theme,\n    labels: labels\n  }, props));\n};\nvar transformData = function transformData(data, transformFn) {\n  if (typeof transformFn !== 'function') {\n    return data;\n  }\n  var transformedData = transformFn(data);\n  if (!Array.isArray(transformedData)) {\n    throw new Error(\"Passed function transformData must return a list of Day objects.\");\n  }\n  if (transformedData.length > 0) {\n    var testObj = transformedData[0];\n    if (typeof testObj.count !== 'number' || testObj.count < 0) {\n      throw new Error(\"Required property \\\"count: number\\\" missing or invalid. Got: \".concat(testObj.count));\n    }\n    if (typeof testObj.date !== 'string' || !/(\\d{4})-(\\d{2})-(\\d{2})/.test(testObj.date)) {\n      throw new Error(\"Required property \\\"date: YYYY-MM-DD\\\" missing or invalid. Got: \".concat(testObj.date));\n    }\n    if (typeof testObj.level !== 'number' || testObj.level < 0 || testObj.level > 4) {\n      throw new Error(\"Required property \\\"level: 0 | 1 | 2 | 3 | 4\\\" missing or invalid: Got: \".concat(testObj.level, \".\"));\n    }\n  }\n  return transformedData;\n};\nexport { GitHubCalendar as default };","map":{"version":3,"sources":["../src/constants.ts","../src/index.tsx"],"names":["API_URL","DEFAULT_THEME","level4","level3","level2","level1","level0","fetchCalendarData","username","year","response","fetch","data","json","ok","Error","error","GitHubCalendar","transformData","transformDataProp","props","setData","useState","loading","setLoading","setError","transformDataCallback","useCallback","contributions","fetchData","then","catch","finally","useEffect","theme","color","undefined","labels","totalCount","transformFn","transformedData","Array","isArray","length","testObj","count","date","test","level"],"mappings":"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","sourcesContent":["// GitHub theme\nimport { Theme } from 'react-activity-calendar';\n\nexport const API_URL = 'https://github-contributions-api.jogruber.de/v4/';\n\nexport const DEFAULT_THEME: Theme = {\n  level4: '#216e39',\n  level3: '#30a14e',\n  level2: '#40c463',\n  level1: '#9be9a8',\n  level0: '#ebedf0',\n};\n","import React, { FunctionComponent, useCallback, useEffect, useState } from 'react';\nimport Calendar, {\n  CalendarData,\n  createCalendarTheme,\n  Props as CalendarProps,\n  Skeleton,\n} from 'react-activity-calendar';\n\nimport { API_URL, DEFAULT_THEME } from './constants';\nimport { ApiErrorResponse, ApiResponse, Year } from './types';\n\ninterface Props extends Omit<CalendarProps, 'data'> {\n  username: string;\n  year?: Year;\n  transformData?: (data: CalendarData) => CalendarData;\n}\n\nasync function fetchCalendarData(username: string, year: Year): Promise<ApiResponse> {\n  const response = await fetch(`${API_URL}${username}?y=${year}`);\n  const data: ApiResponse | ApiErrorResponse = await response.json();\n\n  if (!response.ok) {\n    throw new Error((data as ApiErrorResponse).error);\n  }\n\n  return data as ApiResponse;\n}\n\nconst GitHubCalendar: FunctionComponent<Props> = ({\n  username,\n  year = 'last',\n  transformData: transformDataProp,\n  ...props\n}) => {\n  const [data, setData] = useState<CalendarData | null>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const transformDataCallback = useCallback(\n    (contributions: CalendarData) => transformData(contributions, transformDataProp),\n    [transformDataProp],\n  );\n\n  const fetchData = useCallback(() => {\n    setLoading(true);\n    setError(null);\n    fetchCalendarData(username, year)\n      .then(({ contributions }) => setData(transformDataCallback(contributions)))\n      .catch(setError)\n      .finally(() => setLoading(false));\n  }, [username, year, transformDataCallback]);\n\n  useEffect(fetchData, [fetchData]);\n\n  if (error) {\n    return (\n      <div>\n        <i>Unable to fetch contribution data. See console.</i>\n      </div>\n    );\n  }\n\n  if (loading || !data) {\n    return <Skeleton loading />;\n  }\n\n  const theme = props.color ? undefined : props.theme ?? DEFAULT_THEME;\n\n  const labels = {\n    totalCount: `{{count}} contributions in ${year === 'last' ? 'the last year' : '{{year}}'}`,\n  };\n\n  return <Calendar data={data} theme={theme} labels={labels} {...props} />;\n};\n\nconst transformData = (data: CalendarData, transformFn?: Props['transformData']): CalendarData => {\n  if (typeof transformFn !== 'function') {\n    return data;\n  }\n\n  const transformedData = transformFn(data);\n\n  if (!Array.isArray(transformedData)) {\n    throw new Error(`Passed function transformData must return a list of Day objects.`);\n  }\n\n  if (transformedData.length > 0) {\n    const testObj = transformedData[0];\n\n    if (typeof testObj.count !== 'number' || testObj.count < 0) {\n      throw new Error(\n        `Required property \"count: number\" missing or invalid. Got: ${testObj.count}`,\n      );\n    }\n\n    if (typeof testObj.date !== 'string' || !/(\\d{4})-(\\d{2})-(\\d{2})/.test(testObj.date)) {\n      throw new Error(\n        `Required property \"date: YYYY-MM-DD\" missing or invalid. Got: ${testObj.date}`,\n      );\n    }\n\n    if (typeof testObj.level !== 'number' || testObj.level < 0 || testObj.level > 4) {\n      throw new Error(\n        `Required property \"level: 0 | 1 | 2 | 3 | 4\" missing or invalid: Got: ${testObj.level}.`,\n      );\n    }\n  }\n\n  return transformedData;\n};\n\nexport { createCalendarTheme };\nexport default GitHubCalendar;\n"]},"metadata":{},"sourceType":"module"}